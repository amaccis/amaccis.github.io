<!doctype html><html lang=en><head><title>Trying to learn Haskell - List comprehensions | amaccis.blog</title><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><meta name=viewport content="width=device-width,minimum-scale=1"><meta name=description content="Every time I tried to learn functional programming, I hated it and I did not achieve any appreciable result. Probably it will go the same way this time too, anyway I thought to give functional programming, and in particular Haskell, one more chance. For this reason I&rsquo;ve just started reading a beautiful book: Learn You a Haskell for Great Good!.
I thought I may write down all the interesting (or weird) things I find out, trying, if possible, to compare them with other things I already know."><meta name=generator content="Hugo 0.110.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel=stylesheet href=/css/style.css><link rel="shortcut icon" href=/images/favicon.ico type=image/x-icon><script async src="https://www.googletagmanager.com/gtag/js?id=G-4S09KRTL53"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-4S09KRTL53",{anonymize_ip:!1})}</script></head><body><nav class=navigation><a href=/><span class=arrow>←</span>Home</a>
<a href=/posts>Archive</a>
<a href=/tags>Tags</a>
<a href=/about>About</a></nav><main class=main><section id=single><h1 class=title>Trying to learn Haskell - List comprehensions</h1><div class=tip><time datetime="2023-02-25 00:00:00 +0000 UTC">Feb 25, 2023</time>
<span class=split>·</span>
<span>861 words</span>
<span class=split>·</span>
<span>5 minute read</span></div><div class=content><p>Every time I tried to learn <strong>functional programming</strong>, I hated it and I did not achieve any appreciable result.
Probably it will go the same way this time too, anyway I thought to give functional programming, and in particular <strong>Haskell</strong>, one more chance.
For this reason I&rsquo;ve just started reading a beautiful book: <strong><a href=http://learnyouahaskell.com/ target=_blank rel=noopener>Learn You a Haskell for Great Good!</a></strong>.</p><p>I thought I may write down all the interesting (or weird) things I find out, trying, if possible, to compare them with other things I already know.</p><p>So, with no particular order, let&rsquo;s start with <strong>list comprehensions</strong> even if it&rsquo;s not a peculiarity neither of functional programming nor Haskell, but I find them very
stylish. I mean, I have to start somewhere.</p><p>Imagine you need to create a list by taking all the natural numbers less than or equal to 10 and multiplying each one of them by 2. If you are familiar
with set theory you know that, using roster notation, you&rsquo;re aiming to get this set</p><pre tabindex=0><code>S = { 2, 4, 6, 8, 10, 12, 14, 16, 18, 20 }
</code></pre><p>that, using the set-builder notation, you can write in this way</p><pre tabindex=0><code>S = { 2x | x ∈ ℕ, x ≤ 10 }
</code></pre><p>or even better in this way</p><pre tabindex=0><code>S = { 2x | x ∈ (1,2,3...,10) }
</code></pre><p>But, why set-builder notation? It might seem a little off-topic, but have faith, it will come in handy in a few seconds.</p><p>Going back to our set, if you are writing <strong>PHP</strong> code, you probably will choose something like that</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$s <span style=color:#f92672>=</span> [];
</span></span><span style=display:flex><span><span style=color:#66d9ef>foreach</span> (<span style=color:#a6e22e>range</span>(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>10</span>) <span style=color:#66d9ef>as</span> $x) {
</span></span><span style=display:flex><span>  $s[] <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> $x;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>or, if you are writing <strong>Python</strong> code, something like that</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>s <span style=color:#f92672>=</span> []
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>10</span>):
</span></span><span style=display:flex><span>  s<span style=color:#f92672>.</span>append(<span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> x)
</span></span></code></pre></div><p>because, truth be told, they are very easily readable. Anyway you might prefer something more compact for a lot of reasons.</p><p>In PHP, a more compact way to get the same result could be this one</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span>$s <span style=color:#f92672>=</span> <span style=color:#a6e22e>array_map</span>(<span style=color:#a6e22e>fn</span>($x) <span style=color:#f92672>=&gt;</span> <span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> $x, <span style=color:#a6e22e>range</span>(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>10</span>));
</span></span></code></pre></div><p>but, as you can see, you need to use array maps and arrow functions.</p><p>Some languages, like Python, Haskell and others, provide a syntax construct called list comprehension that allow you to get the same result in a very compact and elegant way.</p><p>Let&rsquo;s take a look at Python list comprehensions. In order to get the result you want, you can write this</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>s <span style=color:#f92672>=</span> [<span style=color:#ae81ff>2</span><span style=color:#f92672>*</span>x <span style=color:#66d9ef>for</span> x <span style=color:#f92672>in</span> range(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>10</span>)]
</span></span></code></pre></div><p>where, as you can see, syntactically, you practically embed a loop into a list.</p><p>That is good but, in my opinion Haskell does even a better job in terms of syntax. Take a look at that</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style=display:flex><span><span style=color:#a6e22e>s</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>2</span><span style=color:#f92672>*</span>x <span style=color:#f92672>|</span> x <span style=color:#f92672>&lt;-</span> [<span style=color:#ae81ff>1</span><span style=color:#f92672>..</span><span style=color:#ae81ff>10</span>]]
</span></span></code></pre></div><p>that produces exactly the result you are expecting</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style=display:flex><span>[<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>6</span>,<span style=color:#ae81ff>8</span>,<span style=color:#ae81ff>10</span>,<span style=color:#ae81ff>12</span>,<span style=color:#ae81ff>14</span>,<span style=color:#ae81ff>16</span>,<span style=color:#ae81ff>18</span>,<span style=color:#ae81ff>20</span>]
</span></span></code></pre></div><p>The syntax above, looks familiar? I mean, more or less it&rsquo;s the copy of the set-builder notation, isn&rsquo;t it?
Before the vertical pipe (|) you put the output of your list comprehension, and after you put the conditions, also known as predicates.
In short, you draw from the list <em>[1..10]</em> to get all your <em>x</em> items you need to multiply by 2 to fill in your list.</p><p>Apart from this basic example, list comprehensions allow you to do a bunch of things in a context of filtering, transforming and combining lists.
You can set multiple predicates (separated by commas), and you can also draw from several lists.</p><p>Let&rsquo;s say that you want to use all possible combinations of numbers in three simple lists to get a list of tuples. In Haskell, you can write something like that</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style=display:flex><span><span style=color:#a6e22e>s</span> <span style=color:#f92672>=</span> [(x,y,z) <span style=color:#f92672>|</span> x <span style=color:#f92672>&lt;-</span> [<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>], y <span style=color:#f92672>&lt;-</span> [<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>], z <span style=color:#f92672>&lt;-</span> [<span style=color:#ae81ff>5</span>,<span style=color:#ae81ff>6</span>]]
</span></span></code></pre></div><p>to get the list of tuples I&rsquo;ve just mentioned</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style=display:flex><span>[(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>5</span>),(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>6</span>),(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>),(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>6</span>),(<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>5</span>),(<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>6</span>),(<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>),(<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>6</span>)]
</span></span></code></pre></div><p>Or, let&rsquo;s say that, playing with strings (of course you can use lists of strings too!), you want to mix a little the Ubuntu releases names</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style=display:flex><span><span style=color:#a6e22e>adjectives</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;Warty&#34;</span>, <span style=color:#e6db74>&#34;Hoary&#34;</span>, <span style=color:#e6db74>&#34;Breezy&#34;</span>, <span style=color:#e6db74>&#34;Dapper&#34;</span>, <span style=color:#e6db74>&#34;Edgy&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>animals</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;Warthog&#34;</span>, <span style=color:#e6db74>&#34;Hedgehog&#34;</span>, <span style=color:#e6db74>&#34;Badger&#34;</span>, <span style=color:#e6db74>&#34;Drake&#34;</span>, <span style=color:#e6db74>&#34;Eft&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>releases</span> <span style=color:#f92672>=</span> [adjective <span style=color:#f92672>++</span> <span style=color:#e6db74>&#34; &#34;</span> <span style=color:#f92672>++</span> animal <span style=color:#f92672>|</span> adjective <span style=color:#f92672>&lt;-</span> adjectives, animal <span style=color:#f92672>&lt;-</span> animals]
</span></span></code></pre></div><p>to get something funny like that</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style=display:flex><span>[<span style=color:#e6db74>&#34;Warty Warthog&#34;</span>,<span style=color:#e6db74>&#34;Warty Hedgehog&#34;</span>,<span style=color:#e6db74>&#34;Warty Badger&#34;</span>,<span style=color:#e6db74>&#34;Warty Drake&#34;</span>,<span style=color:#e6db74>&#34;Warty Eft&#34;</span>,<span style=color:#e6db74>&#34;Hoary Warthog&#34;</span>,<span style=color:#e6db74>&#34;Hoary Hedgehog&#34;</span>,<span style=color:#e6db74>&#34;Hoary Badger&#34;</span>,<span style=color:#e6db74>&#34;Hoary Drake&#34;</span>,<span style=color:#e6db74>&#34;Hoary Eft&#34;</span>,<span style=color:#e6db74>&#34;Breezy Warthog&#34;</span>,
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;Breezy Hedgehog&#34;</span>,<span style=color:#e6db74>&#34;Breezy Badger&#34;</span>,<span style=color:#e6db74>&#34;Breezy Drake&#34;</span>,<span style=color:#e6db74>&#34;Breezy Eft&#34;</span>,<span style=color:#e6db74>&#34;Dapper Warthog&#34;</span>,<span style=color:#e6db74>&#34;Dapper Hedgehog&#34;</span>,<span style=color:#e6db74>&#34;Dapper Badger&#34;</span>,<span style=color:#e6db74>&#34;Dapper Drake&#34;</span>,<span style=color:#e6db74>&#34;Dapper Eft&#34;</span>,<span style=color:#e6db74>&#34;Edgy Warthog&#34;</span>,<span style=color:#e6db74>&#34;Edgy Hedgehog&#34;</span>,
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;Edgy Badger&#34;</span>,<span style=color:#e6db74>&#34;Edgy Drake&#34;</span>,<span style=color:#e6db74>&#34;Edgy Eft&#34;</span>]
</span></span></code></pre></div><p>The interesting (and powerful) thing is that you can also create nested list comprehensions if you have particular needs, mostly if you are handling lists that contain lists.
Imagine you have a list of names (first and last names) and you only want to extract the initials of these names to create another list, a list of initials precisely.</p><p>Well, in Haskell, strings are lists too, they are lists of characters. That&rsquo;s why, in order to get something like that</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style=display:flex><span>[<span style=color:#e6db74>&#34;AD&#34;</span>,<span style=color:#e6db74>&#34;FP&#34;</span>,<span style=color:#e6db74>&#34;ZB&#34;</span>]
</span></span></code></pre></div><p>the code below should not be a surprise</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-haskell data-lang=haskell><span style=display:flex><span><span style=color:#a6e22e>names</span> <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#34;Arthur Dent&#34;</span>, <span style=color:#e6db74>&#34;Ford Prefect&#34;</span>, <span style=color:#e6db74>&#34;Zaphod Beeblebrox&#34;</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>initials</span> <span style=color:#f92672>=</span> [ [ initial <span style=color:#f92672>|</span> initial <span style=color:#f92672>&lt;-</span> name, initial `elem` [<span style=color:#e6db74>&#39;A&#39;</span><span style=color:#f92672>..</span><span style=color:#e6db74>&#39;Z&#39;</span>] ] <span style=color:#f92672>|</span> name <span style=color:#f92672>&lt;-</span> names ]
</span></span></code></pre></div><p>Please, note that the function <em>elem</em> (called <strong>infix function</strong> when it&rsquo;s written, with backticks, between parameters) is used to tell if an item exists in a list
and the used list <em>[&lsquo;A&rsquo;..&lsquo;Z&rsquo;]</em> contains all the capital letters.</p></div><div class=tags><a href=https://amaccis.github.io/tags/english>English</a>
<a href=https://amaccis.github.io/tags/haskell>Haskell</a>
<a href=https://amaccis.github.io/tags/php>PHP</a>
<a href=https://amaccis.github.io/tags/python>Python</a></div></section></main><footer id=footer><div id=social><a class=symbol href=https://github.com/amaccis rel=me target=_blank><svg fill="#bbb" width="28" height="28" viewBox="0 0 72 72" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><title>Github</title><desc>Created with Sketch.</desc><defs/><g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="Social-Icons---Rounded-Black" transform="translate(-264.000000, -939.000000)"><g id="Github" transform="translate(264.000000, 939.000000)"><path d="M8 72H64c4.418278.0 8-3.581722 8-8V8c0-4.418278-3.581722-8-8-8H8c-4.418278 811624501e-24-8 3.581722-8 8V64c541083001e-24 4.418278 3.581722 8 8 8z" id="Rounded" fill="#bbb"/><path d="M35.9985 13C22.746 13 12 23.7870921 12 37.096644c0 10.6440272 6.876 19.6751861 16.4145 22.8617681C29.6145 60.1797862 30.0525 59.4358488 30.0525 58.7973276 30.0525 58.2250681 30.0315 56.7100863 30.0195 54.6996482c-6.6765 1.4562499-8.085-3.2302544-8.085-3.2302544-1.0905-2.7829884-2.664-3.5239139-2.664-3.5239139C17.091 46.4500754 19.4355 46.4801943 19.4355 46.4801943c2.4075.1701719 3.675 2.4833051 3.675 2.4833051 2.142 3.6820383 5.6175 2.6188404 6.9855 2.0014024C30.3135 49.4077535 30.9345 48.3460615 31.62 47.7436831 26.2905 47.1352808 20.688 45.0691228 20.688 35.8361671c0-2.6308879.9345-4.781379 2.4705-6.4665327C22.911 28.7597262 22.0875 26.3110578 23.3925 22.9934585c0 0 2.016-.6475568 6.6 2.4697516C31.908 24.9285993 33.96 24.6620468 36.0015 24.6515052 38.04 24.6620468 40.0935 24.9285993 42.0105 25.4632101c4.581-3.1173084 6.5925-2.4697516 6.5925-2.4697516C49.9125 26.3110578 49.089 28.7597262 48.8415 29.3696344 50.3805 31.0547881 51.309 33.2052792 51.309 35.8361671c0 9.2555448-5.6115 11.29309-10.9575 11.8894446.860999999999997.7439374 1.629 2.2137408 1.629 4.4621184C41.9805 55.4089489 41.9505 58.0067059 41.9505 58.7973276 41.9505 59.4418726 42.3825 60.1918338 43.6005 59.9554002 53.13 56.7627944 60 47.7376593 60 37.096644 60 23.7870921 49.254 13 35.9985 13" fill="#fff"/></g></g></g></svg></a><a class=symbol href=https://www.linkedin.com/in/amaccis/ rel=me target=_blank><svg width="28" height="28" fill="#bbb" viewBox="0 0 500 500"><g fill="none" fill-rule="evenodd"><rect width="500" height="500" fill="#bbb" rx="50"/><path fill="#fff" d="M154.703 100.183c-19.121.0-34.689 15.565-34.703 34.701.0 19.136 15.568 34.704 34.703 34.704 19.128.0 34.688-15.568 34.688-34.704.0-19.134-15.561-34.701-34.688-34.701zm26.045 83.348h-52.094a4.488 4.488.0 00-4.488 4.489v167.675a4.488 4.488.0 004.488 4.488h52.093a4.49 4.49.0 004.489-4.488V188.02a4.486 4.486.0 00-4.488-4.489zm133.176-1.974c-19.064.0-35.817 5.805-46.04 15.271v-8.808c0-2.48-2.01-4.489-4.489-4.489h-49.971a4.489 4.489.0 00-4.489 4.489v167.675a4.488 4.488.0 004.489 4.488h52.044a4.49 4.49.0 004.489-4.488v-82.957c0-23.802 4.378-38.555 26.227-38.555 21.526.026 23.137 15.846 23.137 39.977v81.535a4.489 4.489.0 004.49 4.488h52.068a4.489 4.489.0 004.488-4.488v-91.977c-.001-38.253-7.553-82.161-66.443-82.161z"/></g></svg></a><a class=symbol href=https://x.com/andreamaccis rel=me target=_blank><svg fill="#bbb" width="28" height="28" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="438.536" height="438.536" viewBox="0 0 438.536 438.536" style="enable-background:new 0 0 438.536 438.536"><g><path d="M414.41 24.123C398.333 8.042 378.963.0 356.315.0H82.228C59.58.0 40.21 8.042 24.126 24.123 8.045 40.207.003 59.576.003 82.225v274.084c0 22.647 8.042 42.018 24.123 58.102 16.084 16.084 35.454 24.126 58.102 24.126h274.084c22.648.0 42.018-8.042 58.095-24.126 16.084-16.084 24.126-35.454 24.126-58.102V82.225C438.532 59.576 430.49 40.204 414.41 24.123zM335.471 168.735c.191 1.713.288 4.278.288 7.71.0 15.989-2.334 32.025-6.995 48.104-4.661 16.087-11.8 31.504-21.416 46.254-9.606 14.749-21.074 27.791-34.396 39.115-13.325 11.32-29.311 20.365-47.968 27.117-18.648 6.762-38.637 10.143-59.953 10.143-33.116.0-63.76-8.952-91.931-26.836 4.568.568 9.329.855 14.275.855 27.6.0 52.439-8.565 74.519-25.7-12.941-.185-24.506-4.179-34.688-11.991-10.185-7.803-17.273-17.699-21.271-29.691 4.947.76 8.658 1.137 11.132 1.137 4.187.0 9.042-.76 14.56-2.279-13.894-2.669-25.598-9.562-35.115-20.697-9.519-11.136-14.277-23.84-14.277-38.114v-.571c10.085 4.755 19.602 7.229 28.549 7.422-17.321-11.613-25.981-28.265-25.981-49.963.0-10.66 2.758-20.747 8.278-30.264 15.035 18.464 33.311 33.213 54.816 44.252 21.507 11.038 44.54 17.227 69.092 18.558-.95-3.616-1.427-8.186-1.427-13.704.0-16.562 5.853-30.692 17.56-42.399 11.703-11.706 25.837-17.561 42.394-17.561 17.515.0 32.079 6.283 43.688 18.846 13.134-2.474 25.892-7.33 38.26-14.56-4.757 14.652-13.613 25.788-26.55 33.402 12.368-1.716 23.88-4.95 34.537-9.708C357.458 149.793 347.462 160.166 335.471 168.735z"/></g></svg></a></div><div class=copyright>© Copyright 2023 - Andrea Maccis</div><div class=powerby>Powered by <a href=http://www.gohugo.io/>Hugo</a> Theme By <a href=https://github.com/nodejh/hugo-theme-mini>nodejh</a></div></footer></body></html>